# http://kozikow.wordpress.com/2013/11/15/the-only-alternative-keyboard-layout-youll-ever-need-as-a-programmer/

# Reverse all previous remappings.
# This is useful when I unplug and plug keyboard and want to re-run remap.sh
setxkbmap -layout us

# caps lock to ctrl (later xcape will add escape)
# 66 - keycode of caps lock
xmodmap -e "clear lock"
xmodmap -e "keycode 66 = Control_L"
xmodmap -e "add control = Control_L"

# Initial work of remapping enter to ctrl_l/enter
# 36 - keycode of return
spare_modifier="Hyper_L"
xmodmap -e "keycode 36 = $spare_modifier"
xmodmap -e "remove mod4 = $spare_modifier" # hyper_l is mod4 by default
xmodmap -e "add Control = $spare_modifier"
# Map return to an unused keycode (to keep it around for xcape to use).
xmodmap -e "keycode any = Return"

# Right cmd to blue layer button
# 134 - keycode of right cmd
xmodmap -e "clear mod4"
# xmodmap -e "keycode 133 = Meta_R" # mode_switch, third and fourth column of keysym
xmodmap -e "keycode 134 = ISO_Group_Shift" # mode_switch, third and fourth column of keysym
xmodmap -e "add mod4 = Super_L" # readd back left_cmd as super

# All these names are at /usr/include/X11/keysymdef.h
# Blue layer remappings
# Top row remapping
xmodmap -e "keysym q = q Q 1 exclam"
xmodmap -e "keysym w = w W 2 at"
xmodmap -e "keysym e = e E 3 numbersign"
xmodmap -e "keysym r = r R 4 dollar"
xmodmap -e "keysym t = t T 5 percent"
xmodmap -e "keysym y = y Y 6 asciicircum"
xmodmap -e "keysym u = u U 7 ampersand"
xmodmap -e "keysym i = i I 8 asterisk"
xmodmap -e "keysym o = o O 9 parenleft"
xmodmap -e "keysym p = p P 0 parenright"

# Middle row remapping
xmodmap -e "keysym a = a A parenleft"
xmodmap -e "keysym s = s S parenright"
xmodmap -e "keysym d = d D braceleft"
xmodmap -e "keysym f = f F braceright"
xmodmap -e "keysym g = g G grave asciitilde"
xmodmap -e "keysym h = h H Left Left"
xmodmap -e "keysym j = j J Down Down"
xmodmap -e "keysym k = k K Up Up"
xmodmap -e "keysym l = l L Right Right"
xmodmap -e "keysym semicolon = semicolon colon equal"
xmodmap -e "keysym apostrophe = apostrophe quotedbl backslash bar"

# Bottom row remapping
xmodmap -e "keysym z = z Z bracketleft"
xmodmap -e "keysym x = x X bracketright"
xmodmap -e "keysym c = c C minus"
xmodmap -e "keysym v = v V plus"
xmodmap -e "keysym m = m M underscore"

# enter, escape and backspace remapping
# Install from https://github.com/alols/xcape
~/github/xcape/xcape -d -e "$spare_modifier=Return;Control_L=Escape;Shift_R=BackSpace"
